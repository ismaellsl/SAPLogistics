<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="https://raw.github.com/HPNeo/gmaps/master/gmaps.js"></script>
  <!--  <script>
     function loadScript()
     {
     var myKey = "AIzaSyBpc2TU7sw6-QfJfVaquEmD5tp-S3F7ZSI";
     var script = document.createElement("script");
     script.type = "text/javascript";
     script.src = "http://maps.googleapis.com/maps/api/js?key="+myKey+"&sensor=false&callback=initialize";
     document.body.appendChild(script);
     }
     window.onload = loadScript;
   </script> -->
    <script type="text/javascript">

    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;

    function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer({
            suppressMarkers: true
        });

        var myOptions = {
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
        }

        map = new google.maps.Map(document.getElementById("map"), myOptions);
        directionsDisplay.setMap(map);
        calcRoute();
    }

    function calcRoute() {

        var waypts = [];


        stop = new google.maps.LatLng(-29.796421, -51.150046)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.795104, -51.149913)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.793876, -51.149970)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.793583, -51.150204)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.795095, -51.150038)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.796990, -51.151703)
        waypts.push({
            location: stop,
            stopover: true
        });



        stop = new google.maps.LatLng(-29.798589, -51.155813)
        waypts.push({
            location: stop,
            stopover: true
        });

        stop = new google.maps.LatLng(-29.798856, -51.155702)
        waypts.push({
            location: stop,
            stopover: true
        });

        start = new google.maps.LatLng(-29.796421, -51.150046);
        end = new google.maps.LatLng(-29.796505, -51.149992);

        createMarker(start);

        var request = {
            origin: start,
            destination: end,
            waypoints: waypts,
            optimizeWaypoints: true,
            travelMode: google.maps.DirectionsTravelMode.WALKING
        };

        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
                var route = response.routes[0];
            }
        });
    }

    function createMarker(latlng) {

        var marker = new google.maps.Marker({
            position: latlng,
            map: map
        });
    }

    initialize();
    </script>

  </body>
</html>
